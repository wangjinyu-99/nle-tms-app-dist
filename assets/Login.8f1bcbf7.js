import{B as I,z as S,y as V,I as E,C as N,W as C,_ as z,u as L,E as p,X as U,H as A,r as d,o as y,h as T,n as _,i as n,w as r,J as g,t as m,T as R,q as B,s as F}from"./vendor.f8b270cf.js";/* empty css              *//* empty css               *//* empty css               *//* empty css               *//* empty css               */import{N as O}from"./NavBar.038dd381.js";import{_ as P,$ as f,O as $,C as M,V as q,W as D}from"./index.2217b0e1.js";import{_ as G}from"./login-logo.e632c361.js";const W={name:"login",components:{NavBar:O,[I.name]:I,[S.name]:S,[V.name]:V,[E.name]:E,[N.name]:N},beforeRouteEnter(o,t,u){u(e=>{t.name==="ForgetPassword"?e.routerIsFrom=!0:e.routerIsFrom=!1})},setup(){const{t:o}=C(),t=z(),u=L(),e=p(!1),k=p(!1),v=p(),i=a=>/^([A-Za-z0-9_\-\.])+\@([A-Za-z0-9_\-\.])+\.([A-Za-z]{2,4})$/.test(a),b=a=>new RegExp(/^\S{6,}$/).test(a),c=U({username:"",password:"",checked:!1}),h=p("password"),w=async a=>{e.value=!0;try{const s=await f.login(a);s&&s.code==200?(R.success(o("loginSuccessful")),j(),u.push("/"),t.commit($,s.data.access_token),t.commit(M,s.data.company_config.currency_unit_symbol),t.commit(q,s.data.company_config.volume_unit_symbol),t.commit(D,s.data.company_config.weight_unit_symbol),t.commit(GOOGLE_MAP,s.data.company_config.country)):R(s.msg),e.value=!1}catch{e.value=!1}},l=()=>{f.getService().then(a=>{})},j=()=>{let x=new Date().toString().split(" ")[5].split("T")[1];f.getTimezone({timezone:x}).then(ne=>{})};return A(()=>{let a=window.location.host;a=="dev-tms-admin.nle-tech.com"||f.getFace({url:a}).then(s=>{s.code==200&&(v.value=s.data.consumer_login_title)}),l()}),{logo:v,routerIsFrom:k,emailValidator:i,passValidator:b,viewType:h,state:c,onSubmit:w,submitLoading:e}}},Y=o=>(B("data-v-5e4a02b2"),o=o(),F(),o),Z={class:"login",id:"container"},H={class:"logo"},J=["src"],K={key:1,src:G,style:{width:"100px"},alt:""},X=Y(()=>_("h1",null,"\u7EA2\u5154TMS",-1)),Q={class:"forget"},ee={style:{color:"rgb(17, 117, 170)"}};function oe(o,t,u,e,k,v){const i=d("van-field"),b=d("van-icon"),c=d("van-button"),h=d("van-checkbox"),w=d("van-form");return y(),T("div",Z,[_("div",H,[e.logo?(y(),T("img",{key:0,src:e.logo,style:{width:"100px"},alt:""},null,8,J)):(y(),T("img",K)),X]),n(w,{onSubmit:e.onSubmit,class:"form"},{default:r(()=>[n(i,{modelValue:e.state.username,"onUpdate:modelValue":t[0]||(t[0]=l=>e.state.username=l),"left-icon":"/login-icon/mail.png",name:"username",rules:[{required:!0,message:o.$t("pleaseInputYourEmail")}],label:o.$t("mail"),placeholder:o.$t("pleaseInputYourEmail")},null,8,["modelValue","rules","label","placeholder"]),n(i,{modelValue:e.state.password,"onUpdate:modelValue":t[2]||(t[2]=l=>e.state.password=l),"left-icon":"/login-icon/password.png",name:"password",type:e.viewType,rules:[{required:!0,message:o.$t("pleaseEnterThePassword")}],label:o.$t("password"),placeholder:o.$t("pleaseEnterThePassword")},{"right-icon":r(()=>[n(b,{onClick:t[1]||(t[1]=l=>e.viewType=e.viewType==="password"?"text":"password"),name:e.viewType==="password"?"closed-eye":"eye-o"},null,8,["name"])]),_:1},8,["modelValue","type","rules","label","placeholder"]),_("div",Q,[n(c,{class:"forget-btn",size:"small",to:"forget_Password"},{default:r(()=>[g(m(o.$t("retrievePassword")),1)]),_:1})]),n(c,{class:"btn",block:"",type:"success",round:"",loading:e.submitLoading,"native-type":"submit"},{default:r(()=>[g(m(o.$t("loginIn")),1)]),_:1},8,["loading"]),n(c,{class:"btn",block:"",type:"success",plain:"",round:"",loading:e.submitLoading,to:"register"},{default:r(()=>[g(m(o.$t("newUserRegistration")),1)]),_:1},8,["loading"]),n(i,{name:"checkbox",class:"checkbox",rules:[{required:!0,message:o.$t("pleaseCheckAgreement")}]},{input:r(()=>[n(h,{modelValue:e.state.checked,"onUpdate:modelValue":t[3]||(t[3]=l=>e.state.checked=l),"checked-color":"#58be6a"},{default:r(()=>[g(m(o.$t("haveReadAgree"))+" ",1),_("span",ee,"\u300A"+m(o.$t("redRabbitRegistrationService"))+" \u300B ",1)]),_:1},8,["modelValue"])]),_:1},8,["rules"])]),_:1},8,["onSubmit"])])}var ge=P(W,[["render",oe],["__scopeId","data-v-5e4a02b2"]]);export{ge as default};
