import{B as I,z as V,y as E,I as S,C as N,W as x,_ as z,u as U,E as _,X as $,H as B,r as c,o as h,h as y,n as g,i as n,w as r,J as f,t as m,T as C,q as F,s as L}from"./vendor.3d819787.js";/* empty css              *//* empty css               *//* empty css               *//* empty css               *//* empty css               */import{N as A}from"./NavBar.33db9705.js";import{_ as P,$ as k,O as q,C as M,V as O,W as D}from"./index.fb5ac644.js";import{_ as W}from"./login-logo.e632c361.js";const Y={name:"login",components:{NavBar:A,[I.name]:I,[V.name]:V,[E.name]:E,[S.name]:S,[N.name]:N},beforeRouteEnter(o,s,u){u(e=>{s.name==="ForgetPassword"?e.routerIsFrom=!0:e.routerIsFrom=!1})},setup(){const{t:o}=x(),s=z(),u=U(),e=_(!1),T=_(!1),v=_(),i=window.location.host,b=l=>/^([A-Za-z0-9_\-\.])+\@([A-Za-z0-9_\-\.])+\.([A-Za-z]{2,4})$/.test(l),d=l=>new RegExp(/^\S{6,}$/).test(l),p=$({username:"",password:"",checked:!1,url:i}),w=_("password"),a=async l=>{e.value=!0;try{const t=await k.login(p);t&&t.code==200?(C.success(o("loginSuccessful")),R(),u.push("/"),s.commit(q,t.data.access_token),s.commit(M,t.data.company_config.currency_unit_symbol),s.commit(O,t.data.company_config.volume_unit_symbol),s.commit(D,t.data.company_config.weight_unit_symbol),s.dispatch("initCart",t.data.access_token)):C(t.msg),e.value=!1}catch{e.value=!1}},R=()=>{let j=new Date().toString().split(" ")[5].split("T")[1];k.getTimezone({timezone:j}).then(ae=>{})};return B(()=>{let l=window.location.host;k.getFace({url:l}).then(t=>{t.code==200&&(v.value=t.data.consumer_login_title)})}),{logo:v,routerIsFrom:T,emailValidator:b,passValidator:d,viewType:w,state:p,onSubmit:a,submitLoading:e,url:i}}},Z=o=>(F("data-v-0a9fd73e"),o=o(),L(),o),H={class:"login",id:"container"},G={class:"logo"},J=["src"],K={key:1,src:W,style:{width:"100px"},alt:""},X=Z(()=>g("h1",null,"\u7EA2\u5154TMS",-1)),Q={class:"forget"};function ee(o,s,u,e,T,v){const i=c("van-field"),b=c("van-icon"),d=c("van-button"),p=c("van-checkbox"),w=c("van-form");return h(),y("div",H,[g("div",G,[e.logo?(h(),y("img",{key:0,src:e.logo,style:{width:"100px"},alt:""},null,8,J)):(h(),y("img",K)),X]),n(w,{onSubmit:e.onSubmit,class:"form"},{default:r(()=>[n(i,{modelValue:e.state.username,"onUpdate:modelValue":s[0]||(s[0]=a=>e.state.username=a),"left-icon":"/login-icon/mail.png",name:"username",rules:[{required:!0,message:o.$t("pleaseInputYourEmail")}],label:o.$t("mail"),placeholder:o.$t("pleaseInputYourEmail")},null,8,["modelValue","rules","label","placeholder"]),n(i,{modelValue:e.state.password,"onUpdate:modelValue":s[2]||(s[2]=a=>e.state.password=a),"left-icon":"/login-icon/password.png",name:"password",type:e.viewType,rules:[{required:!0,message:o.$t("pleaseEnterThePassword")}],label:o.$t("password"),placeholder:o.$t("pleaseEnterThePassword")},{"right-icon":r(()=>[n(b,{onClick:s[1]||(s[1]=a=>e.viewType=e.viewType==="password"?"text":"password"),name:e.viewType==="password"?"closed-eye":"eye-o"},null,8,["name"])]),_:1},8,["modelValue","type","rules","label","placeholder"]),g("div",Q,[n(d,{class:"forget-btn",size:"small",to:"forget_Password"},{default:r(()=>[f(m(o.$t("retrievePassword")),1)]),_:1})]),n(d,{class:"btn",block:"",type:"success",round:"",loading:e.submitLoading,"native-type":"submit"},{default:r(()=>[f(m(o.$t("loginIn")),1)]),_:1},8,["loading"]),n(d,{class:"btn",block:"",type:"success",plain:"",round:"",loading:e.submitLoading,to:"register"},{default:r(()=>[f(m(o.$t("newUserRegistration")),1)]),_:1},8,["loading"]),n(i,{name:"checkbox",class:"checkbox",rules:[{required:!0,message:o.$t("pleaseCheckAgreement")}]},{input:r(()=>[n(p,{modelValue:e.state.checked,"onUpdate:modelValue":s[4]||(s[4]=a=>e.state.checked=a),"checked-color":"#58be6a"},{default:r(()=>[f(m(o.$t("haveReadAgree"))+" ",1),g("span",{style:{color:"rgb(17, 117, 170)"},onClick:s[3]||(s[3]=a=>o.$router.push("/registrationTerms"))},"\u300A"+m(o.$t("redRabbitRegistrationService"))+" \u300B ",1)]),_:1},8,["modelValue"])]),_:1},8,["rules"])]),_:1},8,["onSubmit"])])}var _e=P(Y,[["render",ee],["__scopeId","data-v-0a9fd73e"]]);export{_e as default};
