import{B as I,z as S,y as V,I as E,C as N,W as z,_ as L,u as U,E as p,X as $,H as x,r as d,o as w,h as y,n as _,i as n,w as r,J as g,t as m,T as R,q as A,s as B}from"./vendor.4050523f.js";/* empty css              *//* empty css               *//* empty css               *//* empty css               *//* empty css               */import{N as F}from"./NavBar.ad8e30a2.js";import{_ as O,$ as v,O as P,C as M,V as q,W as D}from"./index.462550be.js";import{_ as G}from"./login-logo.e632c361.js";const W={name:"login",components:{NavBar:F,[I.name]:I,[S.name]:S,[V.name]:V,[E.name]:E,[N.name]:N},beforeRouteEnter(e,t,u){u(o=>{t.name==="ForgetPassword"?o.routerIsFrom=!0:o.routerIsFrom=!1})},setup(){const{t:e}=z(),t=L(),u=U(),o=p(!1),T=p(!1),k=p(""),i=a=>/^([A-Za-z0-9_\-\.])+\@([A-Za-z0-9_\-\.])+\.([A-Za-z]{2,4})$/.test(a),f=a=>new RegExp(/^\S{6,}$/).test(a),c=$({username:"",password:"",checked:!1}),h=p("password"),b=async a=>{o.value=!0;try{const s=await v.login(a);s&&s.code==200?(R.success(e("loginSuccessful")),j(),u.push("/"),t.commit(P,s.data.access_token),t.commit(M,s.data.company_config.currency_unit_symbol),t.commit(q,s.data.company_config.volume_unit_symbol),t.commit(D,s.data.company_config.weight_unit_symbol),t.commit(GOOGLE_MAP,s.data.company_config.country)):R(s.msg),o.value=!1}catch{o.value=!1}},l=()=>{v.getService().then(a=>{})},j=()=>{let C=new Date().toString().split(" ")[5].split("T")[1];v.getTimezone({timezone:C}).then(ne=>{})};return x(()=>{let a=window.location.host;a=="dev-tms-admin.nle-tech.com"||v.getFace({url:a}).then(s=>{s.code==200&&(k.value=s.data.consumer_login_title)}),l()}),{routerIsFrom:T,emailValidator:i,passValidator:f,viewType:h,state:c,onSubmit:b,submitLoading:o}}},Y=e=>(A("data-v-07e1026e"),e=e(),B(),e),Z={class:"login",id:"container"},H={class:"logo"},J=["src"],K={key:1,src:G,style:{width:"100px"},alt:""},X=Y(()=>_("h1",null,"\u7EA2\u5154TMS",-1)),Q={class:"forget"},ee={style:{color:"rgb(17, 117, 170)"}};function oe(e,t,u,o,T,k){const i=d("van-field"),f=d("van-icon"),c=d("van-button"),h=d("van-checkbox"),b=d("van-form");return w(),y("div",Z,[_("div",H,[e.logo?(w(),y("img",{key:0,src:e.logo,style:{width:"100px"},alt:""},null,8,J)):(w(),y("img",K)),X]),n(b,{onSubmit:o.onSubmit,class:"form"},{default:r(()=>[n(i,{modelValue:o.state.username,"onUpdate:modelValue":t[0]||(t[0]=l=>o.state.username=l),"left-icon":"/login-icon/mail.png",name:"username",rules:[{required:!0,message:e.$t("pleaseInputYourEmail")}],label:e.$t("mail"),placeholder:e.$t("pleaseInputYourEmail")},null,8,["modelValue","rules","label","placeholder"]),n(i,{modelValue:o.state.password,"onUpdate:modelValue":t[2]||(t[2]=l=>o.state.password=l),"left-icon":"/login-icon/password.png",name:"password",type:o.viewType,rules:[{required:!0,message:e.$t("pleaseEnterThePassword")}],label:e.$t("password"),placeholder:e.$t("pleaseEnterThePassword")},{"right-icon":r(()=>[n(f,{onClick:t[1]||(t[1]=l=>o.viewType=o.viewType==="password"?"text":"password"),name:o.viewType==="password"?"closed-eye":"eye-o"},null,8,["name"])]),_:1},8,["modelValue","type","rules","label","placeholder"]),_("div",Q,[n(c,{class:"forget-btn",size:"small",to:"forget_Password"},{default:r(()=>[g(m(e.$t("retrievePassword")),1)]),_:1})]),n(c,{class:"btn",block:"",type:"success",round:"",loading:o.submitLoading,"native-type":"submit"},{default:r(()=>[g(m(e.$t("loginIn")),1)]),_:1},8,["loading"]),n(c,{class:"btn",block:"",type:"success",plain:"",round:"",loading:o.submitLoading,to:"register"},{default:r(()=>[g(m(e.$t("newUserRegistration")),1)]),_:1},8,["loading"]),n(i,{name:"checkbox",class:"checkbox",rules:[{required:!0,message:e.$t("pleaseCheckAgreement")}]},{input:r(()=>[n(h,{modelValue:o.state.checked,"onUpdate:modelValue":t[3]||(t[3]=l=>o.state.checked=l),"checked-color":"#58be6a"},{default:r(()=>[g(m(e.$t("haveReadAgree"))+" ",1),_("span",ee,"\u300A"+m(e.$t("redRabbitRegistrationService"))+" \u300B ",1)]),_:1},8,["modelValue"])]),_:1},8,["rules"])]),_:1},8,["onSubmit"])])}var ge=O(W,[["render",oe],["__scopeId","data-v-07e1026e"]]);export{ge as default};
