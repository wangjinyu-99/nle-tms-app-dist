import{B as _,z as g,y,I as b,C as V,W as I,E as m,u as N,X as j,r as p,o as P,h as S,i as l,w as c,J as C,t as h,T as r,q as T,s as B,n as f}from"./vendor.4050523f.js";/* empty css              *//* empty css               *//* empty css               *//* empty css               *//* empty css               */import{N as k}from"./NavBar.d75b5557.js";import{_ as R,$ as E}from"./index.528285c3.js";import{_ as q}from"./login-logo.e632c361.js";const x={name:"register",components:{NavBar:k,[_.name]:_,[g.name]:g,[y.name]:y,[b.name]:b,[V.name]:V},setup(){const{t:a}=I(),s=m(60),w=N(),e=m(null),n=m(!1),i=j({email:"",code:"",new_password:"",confirm_new_password:""});return{viewType:m("password"),state:i,time:s,onRegister:async o=>{n.value=!0;try{const d=await E.getResetPassword(i);d&&d.code===200?(r.success(a("successful")),w.push("/login")):r(d.msg),n.value=!1}catch{n.value=!1}},submitLoading:n,sendEmailCode:async()=>{if(!e.value)try{const o=await E.getResetPasswordEmailCode({email:i.email});o&&o.code===200?(e.value=setInterval(()=>{s.value===0?(s.value=60,clearInterval(e.value),e.value=null):s.value-=1},1e3),r.success(a("successful"))):r(o.msg)}catch{r.fail("Sent fail")}}}}},F=a=>(T("data-v-6340a37a"),a=a(),B(),a),U={class:"forget-password",id:"container"},z=F(()=>f("div",{class:"logo"},[f("img",{src:q,style:{width:"100px"},alt:""}),f("h1",null,"\u7EA2\u5154TMS")],-1));function L(a,s,w,e,n,i){const u=p("van-button"),t=p("van-field"),v=p("van-form");return P(),S("div",U,[z,l(v,{onSubmit:e.onRegister,class:"form"},{default:c(()=>[l(t,{modelValue:e.state.email,"onUpdate:modelValue":s[0]||(s[0]=o=>e.state.email=o),"left-icon":"../../public/login-icon/mail.png",name:"email",rules:[{required:!0,message:a.$t("pleaseInputYourEmail")}],placeholder:a.$t("pleaseInputYourEmail")},{button:c(()=>[l(u,{size:"small",type:"success",round:"",plain:"",onClick:e.sendEmailCode,disabled:e.time!==60},{default:c(()=>[C(h(e.time!==60?e.time:a.$t("verificationCode")),1)]),_:1},8,["onClick","disabled"])]),_:1},8,["modelValue","rules","placeholder"]),l(t,{modelValue:e.state.code,"onUpdate:modelValue":s[1]||(s[1]=o=>e.state.code=o),"left-icon":"../../public/login-icon/verification-code.png",name:"code",rules:[{required:!0,message:a.$t("pleaseEnterVerificationCode")}],placeholder:a.$t("pleaseEnterVerificationCode")},null,8,["modelValue","rules","placeholder"]),l(t,{modelValue:e.state.new_password,"onUpdate:modelValue":s[2]||(s[2]=o=>e.state.new_password=o),"left-icon":"../../public/login-icon/password.png",name:"new_password",type:e.viewType,rules:[{required:!0,message:a.$t("pleaseEnterNewPassword")}],placeholder:a.$t("pleaseEnterNewPassword")},null,8,["modelValue","type","rules","placeholder"]),l(t,{modelValue:e.state.confirm_new_password,"onUpdate:modelValue":s[3]||(s[3]=o=>e.state.confirm_new_password=o),"left-icon":"../../public/login-icon/password.png",name:"confirm_new_password",type:e.viewType,rules:[{required:!0,message:a.$t("pleaseConfirmNewPassword")}],placeholder:a.$t("pleaseConfirmNewPassword")},null,8,["modelValue","type","rules","placeholder"]),l(u,{class:"btn",block:"",type:"success",round:"",loading:e.submitLoading,"native-type":"submit"},{default:c(()=>[C(h(a.$t("confirm")),1)]),_:1},8,["loading"])]),_:1},8,["onSubmit"])])}var K=R(x,[["render",L],["__scopeId","data-v-6340a37a"]]);export{K as default};
