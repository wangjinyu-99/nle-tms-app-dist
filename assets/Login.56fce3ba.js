import{B as w,z as h,y as I,I as k,C as T,W as S,_ as N,u as R,E as v,X as j,H as C,r as c,o as x,h as L,i as n,w as r,n as d,J as p,t as m,T as V,q as U,s as $}from"./vendor.4050523f.js";/* empty css              *//* empty css               *//* empty css               *//* empty css               *//* empty css               */import{N as A}from"./NavBar.8067f287.js";import{_ as B,$ as E,O as F,C as O,V as P,W as z}from"./index.0b99a2a5.js";import{_ as M}from"./login-logo.e632c361.js";const q={name:"login",components:{NavBar:A,[w.name]:w,[h.name]:h,[I.name]:I,[k.name]:k,[T.name]:T},beforeRouteEnter(o,s,u){u(e=>{s.name==="ForgetPassword"?e.routerIsFrom=!0:e.routerIsFrom=!1})},setup(){const{t:o}=S(),s=N(),u=R(),e=v(!1),b=v(!1),y=a=>/^([A-Za-z0-9_\-\.])+\@([A-Za-z0-9_\-\.])+\.([A-Za-z]{2,4})$/.test(a),l=a=>new RegExp(/^\S{6,}$/).test(a),_=j({username:"",password:"",checked:!1}),i=v("password"),g=async a=>{e.value=!0;try{const t=await E.login(a);t&&t.code==200?(V.success(o("loginSuccessful")),u.push("/"),s.commit(F,t.data.access_token),s.commit(O,t.data.company_config.currency_unit_symbol),s.commit(P,t.data.company_config.volume_unit_symbol),s.commit(z,t.data.company_config.weight_unit_symbol),s.commit(GOOGLE_MAP,t.data.company_config.country)):V(t.msg),e.value=!1}catch{e.value=!1}},f=()=>{E.getService().then(a=>{})};return C(()=>{f()}),{routerIsFrom:b,emailValidator:y,passValidator:l,viewType:i,state:_,onSubmit:g,submitLoading:e}}},G=o=>(U("data-v-c3246898"),o=o(),$(),o),W={class:"login",id:"container"},Y=G(()=>d("div",{class:"logo"},[d("img",{src:M,style:{width:"100px"},alt:""}),d("h1",null,"\u7EA2\u5154TMS")],-1)),Z={class:"forget"},D={style:{color:"rgb(17, 117, 170)"}};function H(o,s,u,e,b,y){const l=c("van-field"),_=c("van-icon"),i=c("van-button"),g=c("van-checkbox"),f=c("van-form");return x(),L("div",W,[Y,n(f,{onSubmit:e.onSubmit,class:"form"},{default:r(()=>[n(l,{modelValue:e.state.username,"onUpdate:modelValue":s[0]||(s[0]=a=>e.state.username=a),"left-icon":"/login-icon/mail.png",name:"username",rules:[{required:!0,message:o.$t("pleaseInputYourEmail")}],label:o.$t("mail"),placeholder:o.$t("pleaseInputYourEmail")},null,8,["modelValue","rules","label","placeholder"]),n(l,{modelValue:e.state.password,"onUpdate:modelValue":s[2]||(s[2]=a=>e.state.password=a),"left-icon":"/login-icon/password.png",name:"password",type:e.viewType,rules:[{required:!0,message:o.$t("pleaseEnterThePassword")}],label:o.$t("password"),placeholder:o.$t("pleaseEnterThePassword")},{"right-icon":r(()=>[n(_,{onClick:s[1]||(s[1]=a=>e.viewType=e.viewType==="password"?"text":"password"),name:e.viewType==="password"?"closed-eye":"eye-o"},null,8,["name"])]),_:1},8,["modelValue","type","rules","label","placeholder"]),d("div",Z,[n(i,{class:"forget-btn",size:"small",to:"forget_Password"},{default:r(()=>[p(m(o.$t("retrievePassword")),1)]),_:1})]),n(i,{class:"btn",block:"",type:"success",round:"",loading:e.submitLoading,"native-type":"submit"},{default:r(()=>[p(m(o.$t("loginIn")),1)]),_:1},8,["loading"]),n(i,{class:"btn",block:"",type:"success",plain:"",round:"",loading:e.submitLoading,to:"register"},{default:r(()=>[p(m(o.$t("newUserRegistration")),1)]),_:1},8,["loading"]),n(l,{name:"checkbox",class:"checkbox",rules:[{required:!0,message:o.$t("pleaseCheckAgreement")}]},{input:r(()=>[n(g,{modelValue:e.state.checked,"onUpdate:modelValue":s[3]||(s[3]=a=>e.state.checked=a),"checked-color":"#58be6a"},{default:r(()=>[p(m(o.$t("haveReadAgree"))+" ",1),d("span",D,"\u300A"+m(o.$t("redRabbitRegistrationService"))+" \u300B ",1)]),_:1},8,["modelValue"])]),_:1},8,["rules"])]),_:1},8,["onSubmit"])])}var ne=B(q,[["render",H],["__scopeId","data-v-c3246898"]]);export{ne as default};
