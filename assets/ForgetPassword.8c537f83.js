import{B as _,z as g,y,I as V,C as b,W as I,E as m,u as N,X as j,r as p,o as P,h as S,i as n,w as c,J as C,t as h,T as r,q as T,s as B,n as f}from"./vendor.3d819787.js";/* empty css              *//* empty css               *//* empty css               *//* empty css               *//* empty css               */import{N as k}from"./NavBar.33db9705.js";import{_ as R,$ as E}from"./index.fb5ac644.js";import{_ as q}from"./login-logo.e632c361.js";const x={name:"register",components:{NavBar:k,[_.name]:_,[g.name]:g,[y.name]:y,[V.name]:V,[b.name]:b},setup(){const{t:s}=I(),o=m(60),w=N(),e=m(null),t=m(!1),i=j({email:"",code:"",new_password:"",confirm_new_password:""});return{viewType:m("password"),state:i,time:o,onRegister:async a=>{t.value=!0;try{const d=await E.getResetPassword(i);d&&d.code===200?(r.success(s("successful")),w.push("/login")):r(d.msg),t.value=!1}catch{t.value=!1}},submitLoading:t,sendEmailCode:async()=>{if(!e.value)try{const a=await E.getResetPasswordEmailCode({email:i.email});a&&a.code===200?(e.value=setInterval(()=>{o.value===0?(o.value=60,clearInterval(e.value),e.value=null):o.value-=1},1e3),r.success(s("successful"))):r(a.msg)}catch{r.fail("Sent fail")}}}}},F=s=>(T("data-v-6c8d9628"),s=s(),B(),s),U={class:"forget-password",id:"container"},z=F(()=>f("div",{class:"logo"},[f("img",{src:q,style:{width:"100px"},alt:""}),f("h1",null,"\u7EA2\u5154TMS")],-1));function L(s,o,w,e,t,i){const u=p("van-button"),l=p("van-field"),v=p("van-form");return P(),S("div",U,[z,n(v,{onSubmit:e.onRegister,class:"form"},{default:c(()=>[n(l,{modelValue:e.state.email,"onUpdate:modelValue":o[0]||(o[0]=a=>e.state.email=a),"left-icon":"/login-icon/mail.png",name:"email",rules:[{required:!0,message:s.$t("pleaseInputYourEmail")}],placeholder:s.$t("pleaseInputYourEmail")},{button:c(()=>[n(u,{size:"small",type:"success",round:"",plain:"",onClick:e.sendEmailCode,disabled:e.time!==60},{default:c(()=>[C(h(e.time!==60?e.time:s.$t("verificationCode")),1)]),_:1},8,["onClick","disabled"])]),_:1},8,["modelValue","rules","placeholder"]),n(l,{modelValue:e.state.code,"onUpdate:modelValue":o[1]||(o[1]=a=>e.state.code=a),"left-icon":"/login-icon/verification-code.png",name:"code",rules:[{required:!0,message:s.$t("pleaseEnterVerificationCode")}],placeholder:s.$t("pleaseEnterVerificationCode")},null,8,["modelValue","rules","placeholder"]),n(l,{modelValue:e.state.new_password,"onUpdate:modelValue":o[2]||(o[2]=a=>e.state.new_password=a),"left-icon":"/login-icon/password.png",name:"new_password",type:e.viewType,rules:[{required:!0,message:s.$t("pleaseEnterNewPassword")}],placeholder:s.$t("pleaseEnterNewPassword")},null,8,["modelValue","type","rules","placeholder"]),n(l,{modelValue:e.state.confirm_new_password,"onUpdate:modelValue":o[3]||(o[3]=a=>e.state.confirm_new_password=a),"left-icon":"/login-icon/password.png",name:"confirm_new_password",type:e.viewType,rules:[{required:!0,message:s.$t("pleaseConfirmNewPassword")}],placeholder:s.$t("pleaseConfirmNewPassword")},null,8,["modelValue","type","rules","placeholder"]),n(u,{class:"btn",block:"",type:"success",round:"",loading:e.submitLoading,"native-type":"submit"},{default:c(()=>[C(h(s.$t("confirm")),1)]),_:1},8,["loading"])]),_:1},8,["onSubmit"])])}var K=R(x,[["render",L],["__scopeId","data-v-6c8d9628"]]);export{K as default};
