var ee=Object.defineProperty,ae=Object.defineProperties;var te=Object.getOwnPropertyDescriptors;var $=Object.getOwnPropertySymbols;var le=Object.prototype.hasOwnProperty,oe=Object.prototype.propertyIsEnumerable;var N=(e,o,i)=>o in e?ee(e,o,{enumerable:!0,configurable:!0,writable:!0,value:i}):e[o]=i,O=(e,o)=>{for(var i in o||(o={}))le.call(o,i)&&N(e,i,o[i]);if($)for(var i of $(o))oe.call(o,i)&&N(e,i,o[i]);return e},T=(e,o)=>ae(e,te(o));import{ak as P,B as M,a9 as R,af as H,P as z,A as E,y as L,C as Y,al as G,I as J,D as se,_ as ne,G as W,E as p,W as ce,am as ie,H as re,T as B,r as d,o as h,h as y,i as r,n as a,t as s,M as w,w as m,J as q,F as de,q as _e,s as pe}from"./vendor.3d819787.js";/* empty css                *//* empty css               *//* empty css               *//* empty css               *//* empty css               *//* empty css              *//* empty css               *//* empty css               */import{N as ue}from"./NavBar.371a7dcf.js";import{_ as me,r as V,$ as j}from"./index.2ce8e462.js";const ve={name:"ShipByAppointment",components:{NavBar:ue,[P.name]:P,[M.name]:M,[R.name]:R,[H.name]:H,[z.name]:z,[E.name]:E,[L.name]:L,[Y.name]:Y,[G.name]:G,[J.name]:J},setup(){const e=se(),o=ne(),i=W(()=>o.state.weightUnit),t=W(()=>o.state.currencyUnit),k=p(""),U=p([]),C=p(!1),{t:x}=ce(),A=p(!1),v=p(!1),u=p(!1),f=p(!1),g=p(!1),l=p({checked:"",type:3,settlement_type:1,settlement_type_name:"\u7968\u7ED3",place_fullname:"",place_phone:"",place_country:"",place_post_code:"",place_house_number:"",place_city:"",place_street:"",place_address:"",place_lat:"",place_lon:"",execution_date:"",second_place_fullname:"",second_place_phone:"",second_place_country:"",second_place_post_code:"",second_place_house_number:"",second_place_city:"",second_place_street:"",second_place_address:"",second_place_lat:"",second_place_lon:"",second_execution_date:"",package_list:[],remark:"",count_settlement_amount:null,starting_price:null,package_settlement_amount:null}),D=()=>{e.params.type==1?l.value=T(O({},l.value),{place_fullname:e.params.place_fullname,place_phone:e.params.place_phone,place_country:e.params.place_country,place_post_code:e.params.place_post_code,place_house_number:e.params.place_house_number,place_city:e.params.place_city,place_street:e.params.place_street,place_address:e.params.place_address,place_lat:e.params.place_lat,place_lon:e.params.place_lon}):e.params.type==0&&(l.value=T(O({},l.value),{second_place_fullname:e.params.place_fullname,second_place_phone:e.params.place_phone,second_place_country:e.params.place_country,second_place_post_code:e.params.place_post_code,second_place_house_number:e.params.place_house_number,second_place_city:e.params.place_city,second_place_street:e.params.place_street,second_place_address:e.params.place_address,second_place_lat:e.params.place_lat,second_place_lon:e.params.place_lon})),l.value.place_fullname!=""&&l.value.second_place_fullname!=""&&(v.value=!1,I(),F())},I=()=>{let c={type:1,place_country:l.value.place_country,place_post_code:l.value.place_post_code,place_house_number:l.value.place_house_number,place_city:l.value.place_city,place_street:l.value.place_street,place_lat:l.value.place_lat,place_lon:l.value.place_lon};j.getOrderDate(c).then(_=>{_.code==200?(U.value=_.data,e.query.id||(l.value.execution_date=_.data[0],l.value.second_execution_date=_.data[0])):B.fail(_.msg)}),l.value.execution_date!=""&&(f.value=!1),F()},b=()=>{l.value.package_list=[];let c={weight:e.params.weight,expect_quantity:e.params.weight,express_first_no:e.params.express_first_no,picture_list:e.params.picture_list};console.log("obj"),console.log(c),k.value=`${e.params.express_first_no},${e.params.weight}(${i.value}) ,${e.params.expect_quantity}(\u4EF6)`,l.value.package_list.push(c),l.value.package_list.length>0&&(u.value=!1),F()},n=()=>{e.query.type||l.value.package_list.length<=0?V.push("/itemInformation"):V.push({name:"ItemInformation",query:{weight:l.value.package_list[0].weight,expect_quantity:l.value.package_list[0].expect_quantity,express_first_no:l.value.package_list[0].express_first_no,picture_list:l.value.package_list[0].picture_list}})},K=c=>{C.value=!1,l.value.execution_date=c},F=()=>{l.value.place_fullname!=""&&l.value.second_place_fullname!=""&&l.value.package_list.length>=1&&j.getOrderPriceCount(l.value).then(c=>{c.code==200?l.value=c.data:B.fail(c.msg)})},Q=()=>{l.value.remark=x("contactBeforeYouCome")},X=()=>{l.value.place_fullname==""&&l.value.second_place_fullname==""&&l.value.package_list.length<1&&l.value.execution_date==""&&l.value.checked==""?(v.value=!0,u.value=!0,f.value=!0,g.value=!0):l.value.package_list.length<1?u.value=!0:l.value.execution_date==""?f.value=!0:l.value.checked==""?g.value=!0:j.order(l.value).then(c=>{c.code==200?V.push({name:"ToPay",query:{id:c.data.id}}):B.fail(c.msg)})},Z=()=>{j.getDetailsOrder(e.query.id).then(c=>{l.value=c.data,c.data.package_list.map(_=>{k.value=`${_.express_first_no},${_.weight}(${i.value}) ,${_.expect_quantity}(\u4EF6)`,I()})})};return ie(()=>{e.query.type&&(k.value="",l.value={checked:"",type:3,settlement_type:1,settlement_type_name:"\u7968\u7ED3",place_fullname:"",place_phone:"",place_country:"",place_post_code:"",place_house_number:"",place_city:"",place_street:"",place_address:"",place_lat:"",place_lon:"",execution_date:"",second_place_fullname:"",second_place_phone:"",second_place_country:"",second_place_post_code:"",second_place_house_number:"",second_place_city:"",second_place_street:"",second_place_address:"",second_place_lat:"",second_place_lon:"",package_list:[],remark:"",count_settlement_amount:null,starting_price:null,package_settlement_amount:null}),e.params.type&&D(),e.params.express_first_no&&b(),e.query.id&&Z()}),re(()=>{o.state.token||(V.push("/login"),B.fail(x("signInFirst")))}),{requireHead:v,requiredItem:u,requiredDate:f,requiredcheckbox:g,currencyUnit:t,weightUnit:i,form:l,val:k,columns:U,showDate:C,show:A,toShipAppointment:D,itemInformation:b,onConfirm:K,toRemark:Q,placeOrder:X,toItemInformation:n}}},S=e=>(_e("data-v-51d746ae"),e=e(),pe(),e),fe={class:"ship-appointment"},he={class:"appointment-head"},ye={class:"head"},ke={class:"send"},ge=S(()=>a("div",{class:"border"},null,-1)),be={class:"receive"},we={class:"address-library"},qe={class:"address font"},Ce={class:"information"},xe=S(()=>a("div",{class:"address-border"},null,-1)),De={class:"address-library"},Ie={class:"address font"},Be={class:"information"},Ve=S(()=>a("div",{class:"address-border"},null,-1)),je={key:0,class:"required"},Se={class:"cell"},Ue={class:"custom-title"},Ae={key:0,class:"required"},Fe={key:1,class:"required"},Oe={class:"custom-title"},Te={class:"cell"},$e={key:1,class:"required"},Ne={key:0,class:"box"},Pe={class:"box-title"},Me={class:"box-illustrate"},Re={class:"basic-freight"},He={class:"fixed-costs"},ze={class:"basic-freight"},Ee={class:"fixed-costs"},Le={class:"footer-btn"},Ye={class:"fee"},Ge={class:"total-cost"},Je={style:{color:"#ffa785"}},We=S(()=>a("div",{class:"cost-border"},null,-1)),Ke={class:"illustrate"};function Qe(e,o,i,t,k,U){const C=d("nav-bar"),x=d("van-divider"),A=d("van-tag"),v=d("van-cell"),u=d("van-field"),f=d("van-picker"),g=d("van-popup"),l=d("van-button"),D=d("van-checkbox"),I=d("van-overlay"),b=d("van-icon");return h(),y(de,null,[r(C,{title:e.$t("shipByAppointment"),onClickLeft:()=>e.$router.push("/")},null,8,["title","onClickLeft"]),a("div",fe,[a("div",he,[a("div",ye,[a("div",ke,s(e.$t("send")),1),ge,a("div",be,s(e.$t("receive")),1)]),a("div",null,[a("div",null,[a("div",we,[a("div",null,[a("div",qe,s(t.form.place_fullname)+"\xA0\xA0\xA0 "+s(t.form.place_phone),1),a("div",Ce,s(t.form.place_address),1)]),xe,a("div",{class:"address",onClick:o[0]||(o[0]=n=>e.$router.push({name:"AddressBook",query:{type:1}}))},s(e.$t("addressBook")),1)])]),r(x),a("div",null,[a("div",De,[a("div",null,[a("div",Ie,s(t.form.second_place_fullname)+"\xA0\xA0\xA0 "+s(t.form.second_place_phone),1),a("div",Be,s(t.form.second_place_address),1)]),Ve,a("div",{class:"address",onClick:o[1]||(o[1]=n=>e.$router.push({name:"AddressBook",query:{type:0}}))},s(e.$t("addressBook")),1)])])])]),t.requireHead?(h(),y("div",je,s(e.$t("required")),1)):w("",!0),a("div",Se,[r(v,{"is-link":"",onClick:t.toItemInformation,"title-style":"text-align: left",value:t.val},{title:m(()=>[a("span",Ue,s(e.$t("thing")),1),r(A,{plain:"",round:"",type:"warning"},{default:m(()=>[q(s(e.$t("required")),1)]),_:1})]),_:1},8,["onClick","value"]),t.requiredItem?(h(),y("div",Ae,s(e.$t("required")),1)):w("",!0),r(u,{modelValue:t.form.execution_date,"onUpdate:modelValue":o[2]||(o[2]=n=>t.form.execution_date=n),"is-link":"",readonly:"",name:"place_country",label:e.$t("expectedTimeVisit"),placeholder:e.$t("pleaseSelectDate"),"input-align":"right",rules:[{required:!0,message:e.$t("pleaseSelectDate"),trigger:"onChange"}],onClick:o[3]||(o[3]=n=>t.showDate=!0)},null,8,["modelValue","label","placeholder","rules"]),t.requiredDate?(h(),y("div",Fe,s(e.$t("required")),1)):w("",!0),r(g,{show:t.showDate,"onUpdate:show":o[5]||(o[5]=n=>t.showDate=n),position:"bottom"},{default:m(()=>[r(f,{"value-key":"name",columns:t.columns,onConfirm:t.onConfirm,onCancel:o[4]||(o[4]=n=>t.showDate=!1)},null,8,["columns","onConfirm"])]),_:1},8,["show"]),r(v,{"title-style":"text-align: left",value:t.form.settlement_type_name,"is-link":""},{title:m(()=>[a("span",Oe,s(e.$t("paymentMethod")),1)]),_:1},8,["value"])]),a("div",Te,[r(u,{modelValue:t.form.remark,"onUpdate:modelValue":o[6]||(o[6]=n=>t.form.remark=n),rows:"2",autosize:"",label:e.$t("remark"),type:"textarea",maxlength:"30","show-word-limit":""},null,8,["modelValue","label"]),r(l,{class:"btn",plain:"",hairline:"",round:"",type:"primary",size:"small",onClick:t.toRemark},{default:m(()=>[q(s(e.$t("contactBeforeYouCome")),1)]),_:1},8,["onClick"])]),r(D,{modelValue:t.form.checked,"onUpdate:modelValue":o[8]||(o[8]=n=>t.form.checked=n),"checked-color":"#58be6a",style:{"margin-left":"10px","margin-bottom":"10px"},"label-disabled":"",onClick:o[9]||(o[9]=n=>t.requiredcheckbox=!1)},{default:m(()=>[q(s(e.$t("haveReadAgree"))+" ",1),a("span",{style:{color:"#2dc18c"},onClick:o[7]||(o[7]=n=>e.$router.push("/termsDetails"))}," \u300A"+s(e.$t("expressServiceTerms"))+" \u300B ",1)]),_:1},8,["modelValue"]),t.requiredcheckbox?(h(),y("div",$e,s(e.$t("required")),1)):w("",!0)]),r(I,{show:t.show},null,8,["show"]),t.show?(h(),y("div",Ne,[a("div",Pe,[a("div",null,s(e.$t("detail")),1),a("div",null,[r(b,{name:"cross",onClick:o[10]||(o[10]=n=>t.show=!1)})])]),a("div",Me,[a("div",null,[a("div",Re,s(e.$t("basicFreight")),1),a("div",He,s(e.$t("fixedCosts")),1),a("div",null,s(e.$t("weightMileageFee")),1)]),a("div",null,[a("div",ze,s(t.currencyUnit)+" "+s(t.form.count_settlement_amount?t.form.count_settlement_amount:""),1),a("div",Ee,s(t.currencyUnit)+" "+s(t.form.starting_price?t.form.starting_price:""),1),a("div",null,s(t.currencyUnit)+" "+s(t.form.package_list.length>0?t.form.package_list[0].settlement_amount:""),1)])])])):w("",!0),a("div",Le,[a("div",Ye,[a("div",Ge,[a("div",null,s(e.$t("estimatedTotalCost")),1),a("div",Je,s(t.currencyUnit)+s(t.form.count_settlement_amount),1),We,a("div",{onClick:o[11]||(o[11]=n=>t.show=!0),style:{cursor:"pointer"}},[q(s(e.$t("detail"))+" ",1),r(b,{color:"#DFDFDF",name:t.show==!0?"arrow-down":"arrow-up"},null,8,["name"])])]),a("div",Ke,s(e.$t("theActualTotalFeeVerificationPickup")),1)]),a("div",null,[r(l,{round:"",type:"success",style:{"min-width":"80px"},onClick:t.placeOrder},{default:m(()=>[q(s(e.$t("placeOrder")),1)]),_:1},8,["onClick"])])])],64)}var da=me(ve,[["render",Qe],["__scopeId","data-v-51d746ae"]]);export{da as default};
