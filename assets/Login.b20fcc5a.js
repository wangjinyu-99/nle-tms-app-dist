import{B as I,z as V,y as E,I as S,C as N,W as j,_ as x,u as z,E as p,X as U,H as $,r as c,o as w,h as y,n as _,i as n,w as r,J as g,t as m,T as C,q as B,s as F}from"./vendor.3d819787.js";/* empty css              *//* empty css               *//* empty css               *//* empty css               *//* empty css               */import{N as L}from"./NavBar.371a7dcf.js";import{_ as A,$ as k,O as P,C as q,V as M,W as O}from"./index.2ce8e462.js";import{_ as D}from"./login-logo.e632c361.js";const W={name:"login",components:{NavBar:L,[I.name]:I,[V.name]:V,[E.name]:E,[S.name]:S,[N.name]:N},beforeRouteEnter(o,s,u){u(e=>{s.name==="ForgetPassword"?e.routerIsFrom=!0:e.routerIsFrom=!1})},setup(){const{t:o}=j(),s=x(),u=z(),e=p(!1),T=p(!1),f=p(),i=l=>/^([A-Za-z0-9_\-\.])+\@([A-Za-z0-9_\-\.])+\.([A-Za-z]{2,4})$/.test(l),v=l=>new RegExp(/^\S{6,}$/).test(l),d=U({username:"",password:"",checked:!1}),b=p("password"),h=async l=>{e.value=!0;try{const t=await k.login(l);t&&t.code==200?(C.success(o("loginSuccessful")),a(),u.push("/"),s.commit(P,t.data.access_token),s.commit(q,t.data.company_config.currency_unit_symbol),s.commit(M,t.data.company_config.volume_unit_symbol),s.commit(O,t.data.company_config.weight_unit_symbol),s.dispatch("initCart",t.data.access_token)):C(t.msg),e.value=!1}catch{e.value=!1}},a=()=>{let R=new Date().toString().split(" ")[5].split("T")[1];k.getTimezone({timezone:R}).then(te=>{})};return $(()=>{let l="dev-tms-admin.nle-tech.com";k.getFace({url:l}).then(t=>{t.code==200&&(f.value=t.data.consumer_login_title)})}),{logo:f,routerIsFrom:T,emailValidator:i,passValidator:v,viewType:b,state:d,onSubmit:h,submitLoading:e}}},Y=o=>(B("data-v-8e461fd0"),o=o(),F(),o),Z={class:"login",id:"container"},H={class:"logo"},G=["src"],J={key:1,src:D,style:{width:"100px"},alt:""},K=Y(()=>_("h1",null,"\u7EA2\u5154TMS",-1)),X={class:"forget"};function Q(o,s,u,e,T,f){const i=c("van-field"),v=c("van-icon"),d=c("van-button"),b=c("van-checkbox"),h=c("van-form");return w(),y("div",Z,[_("div",H,[e.logo?(w(),y("img",{key:0,src:e.logo,style:{width:"100px"},alt:""},null,8,G)):(w(),y("img",J)),K]),n(h,{onSubmit:e.onSubmit,class:"form"},{default:r(()=>[n(i,{modelValue:e.state.username,"onUpdate:modelValue":s[0]||(s[0]=a=>e.state.username=a),"left-icon":"/login-icon/mail.png",name:"username",rules:[{required:!0,message:o.$t("pleaseInputYourEmail")}],label:o.$t("mail"),placeholder:o.$t("pleaseInputYourEmail")},null,8,["modelValue","rules","label","placeholder"]),n(i,{modelValue:e.state.password,"onUpdate:modelValue":s[2]||(s[2]=a=>e.state.password=a),"left-icon":"/login-icon/password.png",name:"password",type:e.viewType,rules:[{required:!0,message:o.$t("pleaseEnterThePassword")}],label:o.$t("password"),placeholder:o.$t("pleaseEnterThePassword")},{"right-icon":r(()=>[n(v,{onClick:s[1]||(s[1]=a=>e.viewType=e.viewType==="password"?"text":"password"),name:e.viewType==="password"?"closed-eye":"eye-o"},null,8,["name"])]),_:1},8,["modelValue","type","rules","label","placeholder"]),_("div",X,[n(d,{class:"forget-btn",size:"small",to:"forget_Password"},{default:r(()=>[g(m(o.$t("retrievePassword")),1)]),_:1})]),n(d,{class:"btn",block:"",type:"success",round:"",loading:e.submitLoading,"native-type":"submit"},{default:r(()=>[g(m(o.$t("loginIn")),1)]),_:1},8,["loading"]),n(d,{class:"btn",block:"",type:"success",plain:"",round:"",loading:e.submitLoading,to:"register"},{default:r(()=>[g(m(o.$t("newUserRegistration")),1)]),_:1},8,["loading"]),n(i,{name:"checkbox",class:"checkbox",rules:[{required:!0,message:o.$t("pleaseCheckAgreement")}]},{input:r(()=>[n(b,{modelValue:e.state.checked,"onUpdate:modelValue":s[4]||(s[4]=a=>e.state.checked=a),"checked-color":"#58be6a"},{default:r(()=>[g(m(o.$t("haveReadAgree"))+" ",1),_("span",{style:{color:"rgb(17, 117, 170)"},onClick:s[3]||(s[3]=a=>o.$router.push("/registrationTerms"))},"\u300A"+m(o.$t("redRabbitRegistrationService"))+" \u300B ",1)]),_:1},8,["modelValue"])]),_:1},8,["rules"])]),_:1},8,["onSubmit"])])}var pe=A(W,[["render",Q],["__scopeId","data-v-8e461fd0"]]);export{pe as default};
