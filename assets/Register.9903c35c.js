import{B as b,z as y,y as V,I as C,C as k,W as I,E as p,u as R,X as S,r as f,o as T,h as j,i as t,w as n,J as _,t as v,n as g,T as m,q as B,s as q}from"./vendor.3d819787.js";/* empty css              *//* empty css               *//* empty css               *//* empty css               *//* empty css               */import{N}from"./NavBar.371a7dcf.js";import{_ as x,$ as E}from"./index.2ce8e462.js";import{_ as U}from"./login-logo.e632c361.js";const P={name:"register",components:{NavBar:N,[b.name]:b,[y.name]:y,[V.name]:V,[C.name]:C,[k.name]:k},setup(){const s=window.location.host,{t:o}=I(),i=p(60),e=R(),d=p(null),c=p(!1),l=S({email:"",code:"",password:"",confirm_password:"",url:s,checked:!1});return{viewType:p("password"),state:l,time:i,onRegister:async a=>{c.value=!0;try{const u=await E.register(l);u&&u.code===200?(m.success(o("registrationSuccess")),e.push("/registrationSuccess")):m(u.msg),c.value=!1}catch{c.value=!1}},submitLoading:c,sendEmailCode:async()=>{if(!d.value)try{const a=await E.getResetRegisterEmailCode({email:l.email});a&&a.code===200?(d.value=setInterval(()=>{i.value===0?(i.value=60,clearInterval(d.value),d.value=null):i.value-=1},1e3),m.success(o("successful"))):m(a.msg)}catch{m.fail("Sent fail")}}}}},z=s=>(B("data-v-0f504799"),s=s(),q(),s),A={class:"register",id:"container"},F=z(()=>g("div",{class:"logo"},[g("img",{src:U,style:{width:"100px"},alt:""}),g("h1",null,"\u7EA2\u5154TMS")],-1)),L={style:{color:"rgb(17, 117, 170)"}};function Y(s,o,i,e,d,c){const l=f("van-button"),r=f("van-field"),w=f("van-checkbox"),h=f("van-form");return T(),j("div",A,[F,t(h,{onSubmit:e.onRegister,class:"form"},{default:n(()=>[t(r,{modelValue:e.state.email,"onUpdate:modelValue":o[0]||(o[0]=a=>e.state.email=a),"left-icon":"/login-icon/mail.png",name:"email",rules:[{required:!0,message:s.$t("pleaseInputYourEmail")}],placeholder:s.$t("pleaseInputYourEmail")},{button:n(()=>[t(l,{size:"small",type:"success",round:"",plain:"",onClick:e.sendEmailCode,disabled:e.time!==60},{default:n(()=>[_(v(e.time!==60?e.time:s.$t("verificationCode")),1)]),_:1},8,["onClick","disabled"])]),_:1},8,["modelValue","rules","placeholder"]),t(r,{modelValue:e.state.code,"onUpdate:modelValue":o[1]||(o[1]=a=>e.state.code=a),"left-icon":"/login-icon/verification-code.png",name:"code",rules:[{required:!0,message:s.$t("pleaseEnterVerificationCode")}],placeholder:s.$t("pleaseEnterVerificationCode")},null,8,["modelValue","rules","placeholder"]),t(r,{modelValue:e.state.password,"onUpdate:modelValue":o[2]||(o[2]=a=>e.state.password=a),"left-icon":"/login-icon/password.png",name:"password",type:e.viewType,rules:[{required:!0,message:s.$t("pleaseEnterThePassword")}],placeholder:s.$t("pleaseEnterThePassword")},null,8,["modelValue","type","rules","placeholder"]),t(r,{modelValue:e.state.confirm_password,"onUpdate:modelValue":o[3]||(o[3]=a=>e.state.confirm_password=a),"left-icon":"/login-icon/password.png",name:"confirm_password",type:e.viewType,rules:[{required:!0,message:s.$t("pleaseConfirmPassword")}],placeholder:s.$t("pleaseConfirmPassword")},null,8,["modelValue","type","rules","placeholder"]),t(l,{class:"btn",block:"",type:"success",round:"",loading:e.submitLoading,"native-type":"submit"},{default:n(()=>[_(v(s.$t("register")),1)]),_:1},8,["loading"]),t(r,{name:"checkbox",class:"checkbox",rules:[{required:!0,message:s.$t("pleaseCheckAgreement")}]},{input:n(()=>[t(w,{modelValue:e.state.checked,"onUpdate:modelValue":o[4]||(o[4]=a=>e.state.checked=a),"checked-color":"#58be6a"},{default:n(()=>[_(v(s.$t("haveReadAgree"))+" ",1),g("span",L,"\u300A"+v(s.$t("redRabbitRegistrationService"))+" \u300B ",1)]),_:1},8,["modelValue"])]),_:1},8,["rules"])]),_:1},8,["onSubmit"])])}var O=x(P,[["render",Y],["__scopeId","data-v-0f504799"]]);export{O as default};
