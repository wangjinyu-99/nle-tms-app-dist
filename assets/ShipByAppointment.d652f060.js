var ee=Object.defineProperty,ae=Object.defineProperties;var te=Object.getOwnPropertyDescriptors;var F=Object.getOwnPropertySymbols;var le=Object.prototype.hasOwnProperty,oe=Object.prototype.propertyIsEnumerable;var T=(e,o,i)=>o in e?ee(e,o,{enumerable:!0,configurable:!0,writable:!0,value:i}):e[o]=i,$=(e,o)=>{for(var i in o||(o={}))le.call(o,i)&&T(e,i,o[i]);if(F)for(var i of F(o))oe.call(o,i)&&T(e,i,o[i]);return e},A=(e,o)=>ae(e,te(o));import{ac as N,B as P,a1 as R,a7 as M,P as z,A as E,y as H,C as L,ad as Y,I as G,D as se,_ as ne,G as J,E as _,W as ce,ae as ie,r as d,o as h,h as y,i as r,n as t,t as s,M as w,w as m,J as q,F as re,T as W,q as de,s as _e}from"./vendor.f8b270cf.js";/* empty css                *//* empty css               *//* empty css               *//* empty css               *//* empty css               *//* empty css              *//* empty css               *//* empty css               */import{N as pe}from"./NavBar.028a69d7.js";import{_ as ue,$ as B,r as O}from"./index.9cf8458b.js";const me={name:"ShipByAppointment",components:{NavBar:pe,[N.name]:N,[P.name]:P,[R.name]:R,[M.name]:M,[z.name]:z,[E.name]:E,[H.name]:H,[L.name]:L,[Y.name]:Y,[G.name]:G},setup(){const e=se(),o=ne(),i=J(()=>o.state.weightUnit),l=J(()=>o.state.currencyUnit),k=_(""),V=_([]),C=_(!1),{t:j}=ce(),S=_(!1),v=_(!1),p=_(!1),f=_(!1),g=_(!1),a=_({checked:"",type:3,settlement_type:1,settlement_type_name:"\u7968\u7ED3",place_fullname:"",place_phone:"",place_country:"",place_post_code:"",place_house_number:"",place_city:"",place_street:"",place_address:"",place_lat:"",place_lon:"",execution_date:"",second_place_fullname:"",second_place_phone:"",second_place_country:"",second_place_post_code:"",second_place_house_number:"",second_place_city:"",second_place_street:"",second_place_address:"",second_place_lat:"",second_place_lon:"",second_execution_date:"",package_list:[],remark:"",count_settlement_amount:null,starting_price:null,package_settlement_amount:null}),x=()=>{e.params.type==1?a.value=A($({},a.value),{place_fullname:e.params.place_fullname,place_phone:e.params.place_phone,place_country:e.params.place_country,place_post_code:e.params.place_post_code,place_house_number:e.params.place_house_number,place_city:e.params.place_city,place_street:e.params.place_street,place_address:e.params.place_address,place_lat:e.params.place_lat,place_lon:e.params.place_lon}):e.params.type==0&&(a.value=A($({},a.value),{second_place_fullname:e.params.place_fullname,second_place_phone:e.params.place_phone,second_place_country:e.params.place_country,second_place_post_code:e.params.place_post_code,second_place_house_number:e.params.place_house_number,second_place_city:e.params.place_city,second_place_street:e.params.place_street,second_place_address:e.params.place_address,second_place_lat:e.params.place_lat,second_place_lon:e.params.place_lon})),a.value.place_fullname!=""&&a.value.second_place_fullname!=""&&(v.value=!1,D(),U())},D=()=>{let n={type:1,place_country:a.value.place_country,place_post_code:a.value.place_post_code,place_house_number:a.value.place_house_number,place_city:a.value.place_city,place_street:a.value.place_street,place_lat:a.value.place_lat,place_lon:a.value.place_lon};B.getOrderDate(n).then(u=>{V.value=u.data,e.query.id||(a.value.execution_date=u.data[0],a.value.second_execution_date=u.data[0])}),a.value.execution_date!=""&&(f.value=!1),U()},b=()=>{a.value.package_list=[];let n={weight:e.params.weight,expect_quantity:e.params.weight,express_first_no:e.params.express_first_no,picture_list:e.params.picture_list};console.log("obj"),console.log(n),k.value=`${e.params.express_first_no},${e.params.weight}(${i.value}) ,${e.params.expect_quantity}(\u4EF6)`,a.value.package_list.push(n),a.value.package_list.length>0&&(p.value=!1),U()},c=()=>{e.query.type||a.value.package_list.length<=0?O.push("/itemInformation"):O.push({name:"ItemInformation",query:{weight:a.value.package_list[0].weight,expect_quantity:a.value.package_list[0].expect_quantity,express_first_no:a.value.package_list[0].express_first_no,picture_list:a.value.package_list[0].picture_list}})},K=n=>{C.value=!1,a.value.execution_date=n},U=()=>{a.value.place_fullname!=""&&a.value.second_place_fullname!=""&&a.value.package_list.length>=1&&B.getOrderPriceCount(a.value).then(n=>{n.code==200?(a.value=n.data,a.value=n.data):W.fail(n.msg)})},Q=()=>{a.value.remark=j("contactBeforeYouCome")},X=()=>{a.value.place_fullname==""&&a.value.second_place_fullname==""&&a.value.package_list.length<1&&a.value.execution_date==""&&a.value.checked==""?(v.value=!0,p.value=!0,f.value=!0,g.value=!0):a.value.package_list.length<1?p.value=!0:a.value.execution_date==""?f.value=!0:a.value.checked==""?g.value=!0:B.order(a.value).then(n=>{n.code==200?O.push({name:"ToPay",query:{id:n.data.id}}):W.fail(n.msg)})},Z=()=>{B.getDetailsOrder(e.query.id).then(n=>{a.value=n.data,n.data.package_list.map(u=>{k.value=`${u.express_first_no},${u.weight}(${i.value}) ,${u.expect_quantity}(\u4EF6)`,D()})})};return ie(()=>{e.query.type&&(k.value="",a.value={checked:"",type:3,settlement_type:1,settlement_type_name:"\u7968\u7ED3",place_fullname:"",place_phone:"",place_country:"",place_post_code:"",place_house_number:"",place_city:"",place_street:"",place_address:"",place_lat:"",place_lon:"",execution_date:"",second_place_fullname:"",second_place_phone:"",second_place_country:"",second_place_post_code:"",second_place_house_number:"",second_place_city:"",second_place_street:"",second_place_address:"",second_place_lat:"",second_place_lon:"",package_list:[],remark:"",count_settlement_amount:null,starting_price:null,package_settlement_amount:null}),e.params.type&&x(),e.params.express_first_no&&b(),e.query.id&&Z()}),{requireHead:v,requiredItem:p,requiredDate:f,requiredcheckbox:g,currencyUnit:l,weightUnit:i,form:a,val:k,columns:V,showDate:C,show:S,toShipAppointment:x,itemInformation:b,onConfirm:K,toRemark:Q,placeOrder:X,toItemInformation:c}}},I=e=>(de("data-v-b5a1c4d6"),e=e(),_e(),e),ve={class:"ship-appointment"},fe={class:"appointment-head"},he={class:"head"},ye={class:"send"},ke=I(()=>t("div",{class:"border"},null,-1)),ge={class:"receive"},be={class:"address-library"},we={class:"address font"},qe={class:"information"},Ce=I(()=>t("div",{class:"address-border"},null,-1)),xe={class:"address-library"},De={class:"address font"},Be={class:"information"},Ie=I(()=>t("div",{class:"address-border"},null,-1)),Ve={key:0,class:"required"},je={class:"cell"},Se={class:"custom-title"},Ue={key:0,class:"required"},$e={key:1,class:"required"},Ae={class:"custom-title"},Oe={class:"cell"},Fe={key:1,class:"required"},Te={key:0,class:"box"},Ne={class:"box-title"},Pe={class:"box-illustrate"},Re={class:"basic-freight"},Me={class:"fixed-costs"},ze={class:"basic-freight"},Ee={class:"fixed-costs"},He={class:"footer-btn"},Le={class:"fee"},Ye={class:"total-cost"},Ge={style:{color:"#ffa785"}},Je=I(()=>t("div",{class:"cost-border"},null,-1)),We={class:"illustrate"};function Ke(e,o,i,l,k,V){const C=d("nav-bar"),j=d("van-divider"),S=d("van-tag"),v=d("van-cell"),p=d("van-field"),f=d("van-picker"),g=d("van-popup"),a=d("van-button"),x=d("van-checkbox"),D=d("van-overlay"),b=d("van-icon");return h(),y(re,null,[r(C,{title:e.$t("shipByAppointment"),onClickLeft:()=>e.$router.push("/")},null,8,["title","onClickLeft"]),t("div",ve,[t("div",fe,[t("div",he,[t("div",ye,s(e.$t("send")),1),ke,t("div",ge,s(e.$t("receive")),1)]),t("div",null,[t("div",null,[t("div",be,[t("div",null,[t("div",we,s(l.form.place_fullname)+"\xA0\xA0\xA0 "+s(l.form.place_phone),1),t("div",qe,s(l.form.place_address),1)]),Ce,t("div",{class:"address",onClick:o[0]||(o[0]=c=>e.$router.push({name:"AddressBook",query:{type:1}}))},s(e.$t("addressBook")),1)])]),r(j),t("div",null,[t("div",xe,[t("div",null,[t("div",De,s(l.form.second_place_fullname)+"\xA0\xA0\xA0 "+s(l.form.second_place_phone),1),t("div",Be,s(l.form.second_place_address),1)]),Ie,t("div",{class:"address",onClick:o[1]||(o[1]=c=>e.$router.push({name:"AddressBook",query:{type:0}}))},s(e.$t("addressBook")),1)])])])]),l.requireHead?(h(),y("div",Ve,s(e.$t("required")),1)):w("",!0),t("div",je,[r(v,{"is-link":"",onClick:l.toItemInformation,"title-style":"text-align: left",value:l.val},{title:m(()=>[t("span",Se,s(e.$t("thing")),1),r(S,{plain:"",round:"",type:"warning"},{default:m(()=>[q(s(e.$t("required")),1)]),_:1})]),_:1},8,["onClick","value"]),l.requiredItem?(h(),y("div",Ue,s(e.$t("required")),1)):w("",!0),r(p,{modelValue:l.form.execution_date,"onUpdate:modelValue":o[2]||(o[2]=c=>l.form.execution_date=c),"is-link":"",readonly:"",name:"place_country",label:e.$t("expectedTimeVisit"),placeholder:e.$t("pleaseSelectDate"),"input-align":"right",rules:[{required:!0,message:e.$t("pleaseSelectDate"),trigger:"onChange"}],onClick:o[3]||(o[3]=c=>l.showDate=!0)},null,8,["modelValue","label","placeholder","rules"]),l.requiredDate?(h(),y("div",$e,s(e.$t("required")),1)):w("",!0),r(g,{show:l.showDate,"onUpdate:show":o[5]||(o[5]=c=>l.showDate=c),position:"bottom"},{default:m(()=>[r(f,{"value-key":"name",columns:l.columns,onConfirm:l.onConfirm,onCancel:o[4]||(o[4]=c=>l.showDate=!1)},null,8,["columns","onConfirm"])]),_:1},8,["show"]),r(v,{"title-style":"text-align: left",value:l.form.settlement_type_name,"is-link":""},{title:m(()=>[t("span",Ae,s(e.$t("paymentMethod")),1)]),_:1},8,["value"])]),t("div",Oe,[r(p,{modelValue:l.form.remark,"onUpdate:modelValue":o[6]||(o[6]=c=>l.form.remark=c),rows:"2",autosize:"",label:e.$t("remark"),type:"textarea",maxlength:"30","show-word-limit":""},null,8,["modelValue","label"]),r(a,{class:"btn",plain:"",hairline:"",round:"",type:"primary",size:"small",onClick:l.toRemark},{default:m(()=>[q(s(e.$t("contactBeforeYouCome")),1)]),_:1},8,["onClick"])]),r(x,{modelValue:l.form.checked,"onUpdate:modelValue":o[8]||(o[8]=c=>l.form.checked=c),"checked-color":"#58be6a",style:{"margin-left":"10px","margin-bottom":"10px"},"label-disabled":"",onClick:o[9]||(o[9]=c=>l.requiredcheckbox=!1)},{default:m(()=>[q(s(e.$t("haveReadAgree"))+" ",1),t("span",{style:{color:"#2dc18c"},onClick:o[7]||(o[7]=c=>e.$router.push("/termsDetails"))}," \u300A"+s(e.$t("expressServiceTerms"))+" \u300B ",1)]),_:1},8,["modelValue"]),l.requiredcheckbox?(h(),y("div",Fe,s(e.$t("required")),1)):w("",!0)]),r(D,{show:l.show},null,8,["show"]),l.show?(h(),y("div",Te,[t("div",Ne,[t("div",null,s(e.$t("detail")),1),t("div",null,[r(b,{name:"cross",onClick:o[10]||(o[10]=c=>l.show=!1)})])]),t("div",Pe,[t("div",null,[t("div",Re,s(e.$t("basicFreight")),1),t("div",Me,s(e.$t("fixedCosts")),1),t("div",null,s(e.$t("weightMileageFee")),1)]),t("div",null,[t("div",ze,s(l.currencyUnit)+" "+s(l.form.count_settlement_amount),1),t("div",Ee,s(l.currencyUnit)+" "+s(l.form.starting_price),1),t("div",null,s(l.currencyUnit)+" "+s(l.form.package_list[0].settlement_amount),1)])])])):w("",!0),t("div",He,[t("div",Le,[t("div",Ye,[t("div",null,s(e.$t("estimatedTotalCost")),1),t("div",Ge,s(l.currencyUnit)+s(l.form.count_settlement_amount),1),Je,t("div",{onClick:o[11]||(o[11]=c=>l.show=!0),style:{cursor:"pointer"}},[q(s(e.$t("detail"))+" ",1),r(b,{color:"#DFDFDF",name:l.show==!0?"arrow-down":"arrow-up"},null,8,["name"])])]),t("div",We,s(e.$t("theActualTotalFeeVerificationPickup")),1)]),t("div",null,[r(a,{round:"",type:"success",style:{"min-width":"80px"},onClick:l.placeOrder},{default:m(()=>[q(s(e.$t("placeOrder")),1)]),_:1},8,["onClick"])])])],64)}var ra=ue(me,[["render",Ke],["__scopeId","data-v-b5a1c4d6"]]);export{ra as default};
