import{B as I,x as V,s as S,I as E,C as N,U as j,Y as U,u as z,A as p,V as A,E as B,r as d,o as y,g as k,l as _,h as n,w as r,G as g,t as m,T as R,p as F,n as L}from"./vendor.08d73cb7.js";import{_ as $,$ as v,O as P,C as M,V as O,W as Y}from"./index.44600073.js";/* empty css              *//* empty css               *//* empty css               *//* empty css               *//* empty css               */import{N as q}from"./NavBar.73069699.js";import{_ as D}from"./login-logo.e632c361.js";const Z={name:"login",components:{NavBar:q,[I.name]:I,[V.name]:V,[S.name]:S,[E.name]:E,[N.name]:N},beforeRouteEnter(o,t,u){u(e=>{t.name==="ForgetPassword"?e.routerIsFrom=!0:e.routerIsFrom=!1})},setup(){const{t:o}=j(),t=U(),u=z(),e=p(!1),T=p(!1),f=p(),i=a=>/^([A-Za-z0-9_\-\.])+\@([A-Za-z0-9_\-\.])+\.([A-Za-z]{2,4})$/.test(a),h=a=>new RegExp(/^\S{6,}$/).test(a),c=A({username:"",password:"",checked:!1}),b=p("password"),w=async a=>{e.value=!0;try{const s=await v.login(a);s&&s.code==200?(R.success(o("loginSuccessful")),x(),u.push("/"),t.commit(P,s.data.access_token),t.commit(M,s.data.company_config.currency_unit_symbol),t.commit(O,s.data.company_config.volume_unit_symbol),t.commit(Y,s.data.company_config.weight_unit_symbol),t.dispatch("initCart",s.data.access_token)):R(s.msg),e.value=!1}catch{e.value=!1}},l=()=>{v.getService().then(a=>{})},x=()=>{let C=new Date().toString().split(" ")[5].split("T")[1];v.getTimezone({timezone:C}).then(ne=>{})};return B(()=>{let a=window.location.host;a=="dev-tms-admin.nle-tech.com"||v.getFace({url:a}).then(s=>{s.code==200&&(f.value=s.data.consumer_login_title)}),l()}),{logo:f,routerIsFrom:T,emailValidator:i,passValidator:h,viewType:b,state:c,onSubmit:w,submitLoading:e}}},G=o=>(F("data-v-2231e47a"),o=o(),L(),o),W={class:"login",id:"container"},H={class:"logo"},K=["src"],J={key:1,src:D,style:{width:"100px"},alt:""},Q=G(()=>_("h1",null,"\u7EA2\u5154TMS",-1)),X={class:"forget"},ee={style:{color:"rgb(17, 117, 170)"}};function oe(o,t,u,e,T,f){const i=d("van-field"),h=d("van-icon"),c=d("van-button"),b=d("van-checkbox"),w=d("van-form");return y(),k("div",W,[_("div",H,[e.logo?(y(),k("img",{key:0,src:e.logo,style:{width:"100px"},alt:""},null,8,K)):(y(),k("img",J)),Q]),n(w,{onSubmit:e.onSubmit,class:"form"},{default:r(()=>[n(i,{modelValue:e.state.username,"onUpdate:modelValue":t[0]||(t[0]=l=>e.state.username=l),"left-icon":"/login-icon/mail.png",name:"username",rules:[{required:!0,message:o.$t("pleaseInputYourEmail")}],label:o.$t("mail"),placeholder:o.$t("pleaseInputYourEmail")},null,8,["modelValue","rules","label","placeholder"]),n(i,{modelValue:e.state.password,"onUpdate:modelValue":t[2]||(t[2]=l=>e.state.password=l),"left-icon":"/login-icon/password.png",name:"password",type:e.viewType,rules:[{required:!0,message:o.$t("pleaseEnterThePassword")}],label:o.$t("password"),placeholder:o.$t("pleaseEnterThePassword")},{"right-icon":r(()=>[n(h,{onClick:t[1]||(t[1]=l=>e.viewType=e.viewType==="password"?"text":"password"),name:e.viewType==="password"?"closed-eye":"eye-o"},null,8,["name"])]),_:1},8,["modelValue","type","rules","label","placeholder"]),_("div",X,[n(c,{class:"forget-btn",size:"small",to:"forget_Password"},{default:r(()=>[g(m(o.$t("retrievePassword")),1)]),_:1})]),n(c,{class:"btn",block:"",type:"success",round:"",loading:e.submitLoading,"native-type":"submit"},{default:r(()=>[g(m(o.$t("loginIn")),1)]),_:1},8,["loading"]),n(c,{class:"btn",block:"",type:"success",plain:"",round:"",loading:e.submitLoading,to:"register"},{default:r(()=>[g(m(o.$t("newUserRegistration")),1)]),_:1},8,["loading"]),n(i,{name:"checkbox",class:"checkbox",rules:[{required:!0,message:o.$t("pleaseCheckAgreement")}]},{input:r(()=>[n(b,{modelValue:e.state.checked,"onUpdate:modelValue":t[3]||(t[3]=l=>e.state.checked=l),"checked-color":"#58be6a"},{default:r(()=>[g(m(o.$t("haveReadAgree"))+" ",1),_("span",ee,"\u300A"+m(o.$t("redRabbitRegistrationService"))+" \u300B ",1)]),_:1},8,["modelValue"])]),_:1},8,["rules"])]),_:1},8,["onSubmit"])])}var ge=$(Z,[["render",oe],["__scopeId","data-v-2231e47a"]]);export{ge as default};
