var ee=Object.defineProperty,ae=Object.defineProperties;var te=Object.getOwnPropertyDescriptors;var F=Object.getOwnPropertySymbols;var le=Object.prototype.hasOwnProperty,oe=Object.prototype.propertyIsEnumerable;var T=(e,o,r)=>o in e?ee(e,o,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[o]=r,$=(e,o)=>{for(var r in o||(o={}))le.call(o,r)&&T(e,r,o[r]);if(F)for(var r of F(o))oe.call(o,r)&&T(e,r,o[r]);return e},A=(e,o)=>ae(e,te(o));import{ab as N,B as P,a1 as R,a7 as M,P as z,A as E,y as H,C as L,ac as Y,I as G,D as se,_ as ne,G as J,E as _,W as ce,ad as re,r as d,o as h,h as y,i,n as a,t as s,M as w,w as m,J as q,F as ie,T as W,q as de,s as _e}from"./vendor.4050523f.js";/* empty css                *//* empty css               *//* empty css               *//* empty css               *//* empty css               *//* empty css              *//* empty css               *//* empty css               */import{N as pe}from"./NavBar.8067f287.js";import{_ as ue,$ as B,r as O}from"./index.0b99a2a5.js";const me={name:"ShipByAppointment",components:{NavBar:pe,[N.name]:N,[P.name]:P,[R.name]:R,[M.name]:M,[z.name]:z,[E.name]:E,[H.name]:H,[L.name]:L,[Y.name]:Y,[G.name]:G},setup(){const e=se(),o=ne(),r=J(()=>o.state.weightUnit),l=J(()=>o.state.currencyUnit),k=_(""),V=_([]),C=_(!1),{t:j}=ce(),S=_(!1),v=_(!1),p=_(!1),f=_(!1),g=_(!1),t=_({checked:"",type:3,settlement_type:1,settlement_type_name:"\u7968\u7ED3",place_fullname:"",place_phone:"",place_country:"",place_post_code:"",place_house_number:"",place_city:"",place_street:"",place_address:"",place_lat:"",place_lon:"",execution_date:"",second_place_fullname:"",second_place_phone:"",second_place_country:"",second_place_post_code:"",second_place_house_number:"",second_place_city:"",second_place_street:"",second_place_address:"",second_place_lat:"",second_place_lon:"",second_execution_date:"",package_list:[],remark:"",count_settlement_amount:null,starting_price:null,package_settlement_amount:null}),x=()=>{e.params.type==1?t.value=A($({},t.value),{place_fullname:e.params.place_fullname,place_phone:e.params.place_phone,place_country:e.params.place_country,place_post_code:e.params.place_post_code,place_house_number:e.params.place_house_number,place_city:e.params.place_city,place_street:e.params.place_street,place_address:e.params.place_address,place_lat:e.params.place_lat,place_lon:e.params.place_lon}):e.params.type==0&&(t.value=A($({},t.value),{second_place_fullname:e.params.place_fullname,second_place_phone:e.params.place_phone,second_place_country:e.params.place_country,second_place_post_code:e.params.place_post_code,second_place_house_number:e.params.place_house_number,second_place_city:e.params.place_city,second_place_street:e.params.place_street,second_place_address:e.params.place_address,second_place_lat:e.params.place_lat,second_place_lon:e.params.place_lon})),t.value.place_fullname!=""&&t.value.second_place_fullname!=""&&(v.value=!1,D(),U())},D=()=>{let c={type:1,place_country:t.value.place_country,place_post_code:t.value.place_post_code,place_house_number:t.value.place_house_number,place_city:t.value.place_city,place_street:t.value.place_street,place_lat:t.value.place_lat,place_lon:t.value.place_lon};B.getOrderDate(c).then(u=>{V.value=u.data,e.query.id||(t.value.execution_date=u.data[0],t.value.second_execution_date=u.data[0])}),t.value.execution_date!=""&&(f.value=!1),U()},b=()=>{t.value.package_list=[];let c={weight:e.params.weight,expect_quantity:e.params.weight,express_first_no:e.params.express_first_no,picture_list:e.params.picture_list};k.value=`${e.params.express_first_no},${e.params.weight}(${r.value}) ,${e.params.expect_quantity}(\u4EF6)`,t.value.package_list.push(c),t.value.package_list.length>0&&(p.value=!1),U()},n=()=>{e.query.type||t.value.package_list.length<=0?O.push("/itemInformation"):O.push({name:"ItemInformation",query:{weight:t.value.package_list[0].weight,expect_quantity:t.value.package_list[0].expect_quantity,express_first_no:t.value.package_list[0].express_first_no}})},K=c=>{C.value=!1,t.value.execution_date=c},U=()=>{t.value.place_fullname!=""&&t.value.second_place_fullname!=""&&t.value.package_list.length>=1&&B.getOrderPriceCount(t.value).then(c=>{c.code==200?(t.value=c.data,t.value=c.data):W.fail(c.msg)})},Q=()=>{t.value.remark=j("contactBeforeYouCome")},X=()=>{t.value.place_fullname==""&&t.value.second_place_fullname==""&&t.value.package_list.length<1&&t.value.execution_date==""&&t.value.checked==""?(v.value=!0,p.value=!0,f.value=!0,g.value=!0):t.value.package_list.length<1?p.value=!0:t.value.execution_date==""?f.value=!0:t.value.checked==""?g.value=!0:B.order(t.value).then(c=>{c.code==200?O.push({name:"ToPay",query:{id:c.data.id}}):W.fail(c.msg)})},Z=()=>{B.getDetailsOrder(e.query.id).then(c=>{t.value=c.data,c.data.package_list.map(u=>{k.value=`${u.express_first_no},${u.weight}(${r.value}) ,${u.expect_quantity}(\u4EF6)`,D()})})};return re(()=>{e.query.type&&(k.value="",t.value={checked:"",type:3,settlement_type:1,settlement_type_name:"\u7968\u7ED3",place_fullname:"",place_phone:"",place_country:"",place_post_code:"",place_house_number:"",place_city:"",place_street:"",place_address:"",place_lat:"",place_lon:"",execution_date:"",second_place_fullname:"",second_place_phone:"",second_place_country:"",second_place_post_code:"",second_place_house_number:"",second_place_city:"",second_place_street:"",second_place_address:"",second_place_lat:"",second_place_lon:"",package_list:[],remark:"",count_settlement_amount:null,starting_price:null,package_settlement_amount:null}),e.params.type&&x(),e.params.express_first_no&&b(),e.query.id&&Z()}),{requireHead:v,requiredItem:p,requiredDate:f,requiredcheckbox:g,currencyUnit:l,weightUnit:r,form:t,val:k,columns:V,showDate:C,show:S,toShipAppointment:x,itemInformation:b,onConfirm:K,toRemark:Q,placeOrder:X,toItemInformation:n}}},I=e=>(de("data-v-2a3f28b5"),e=e(),_e(),e),ve={class:"ship-appointment"},fe={class:"appointment-head"},he={class:"head"},ye={class:"send"},ke=I(()=>a("div",{class:"border"},null,-1)),ge={class:"receive"},be={class:"address-library"},we={class:"address font"},qe={class:"information"},Ce=I(()=>a("div",{class:"address-border"},null,-1)),xe={class:"address-library"},De={class:"address font"},Be={class:"information"},Ie=I(()=>a("div",{class:"address-border"},null,-1)),Ve={key:0,class:"required"},je={class:"cell"},Se={class:"custom-title"},Ue={key:0,class:"required"},$e={key:1,class:"required"},Ae={class:"custom-title"},Oe={class:"cell"},Fe={key:1,class:"required"},Te={key:0,class:"box"},Ne={class:"box-title"},Pe={class:"box-illustrate"},Re={class:"basic-freight"},Me={class:"fixed-costs"},ze={class:"basic-freight"},Ee={class:"fixed-costs"},He={class:"footer-btn"},Le={class:"fee"},Ye={class:"total-cost"},Ge={style:{color:"#ffa785"}},Je=I(()=>a("div",{class:"cost-border"},null,-1)),We={class:"illustrate"};function Ke(e,o,r,l,k,V){const C=d("nav-bar"),j=d("van-divider"),S=d("van-tag"),v=d("van-cell"),p=d("van-field"),f=d("van-picker"),g=d("van-popup"),t=d("van-button"),x=d("van-checkbox"),D=d("van-overlay"),b=d("van-icon");return h(),y(ie,null,[i(C,{title:e.$t("shipByAppointment"),onClickLeft:()=>e.$router.push("/")},null,8,["title","onClickLeft"]),a("div",ve,[a("div",fe,[a("div",he,[a("div",ye,s(e.$t("send")),1),ke,a("div",ge,s(e.$t("receive")),1)]),a("div",null,[a("div",null,[a("div",be,[a("div",null,[a("div",we,s(l.form.place_fullname)+"\xA0\xA0\xA0 "+s(l.form.place_phone),1),a("div",qe,s(l.form.place_address),1)]),Ce,a("div",{class:"address",onClick:o[0]||(o[0]=n=>e.$router.push({name:"AddressBook",query:{type:1}}))},s(e.$t("addressBook")),1)])]),i(j),a("div",null,[a("div",xe,[a("div",null,[a("div",De,s(l.form.second_place_fullname)+"\xA0\xA0\xA0 "+s(l.form.second_place_phone),1),a("div",Be,s(l.form.second_place_address),1)]),Ie,a("div",{class:"address",onClick:o[1]||(o[1]=n=>e.$router.push({name:"AddressBook",query:{type:0}}))},s(e.$t("addressBook")),1)])])])]),l.requireHead?(h(),y("div",Ve,s(e.$t("required")),1)):w("",!0),a("div",je,[i(v,{"is-link":"",onClick:l.toItemInformation,"title-style":"text-align: left",value:l.val},{title:m(()=>[a("span",Se,s(e.$t("thing")),1),i(S,{plain:"",round:"",type:"warning"},{default:m(()=>[q(s(e.$t("required")),1)]),_:1})]),_:1},8,["onClick","value"]),l.requiredItem?(h(),y("div",Ue,s(e.$t("required")),1)):w("",!0),i(p,{modelValue:l.form.execution_date,"onUpdate:modelValue":o[2]||(o[2]=n=>l.form.execution_date=n),"is-link":"",readonly:"",name:"place_country",label:e.$t("expectedTimeVisit"),placeholder:e.$t("pleaseSelectDate"),"input-align":"right",rules:[{required:!0,message:e.$t("pleaseSelectDate"),trigger:"onChange"}],onClick:o[3]||(o[3]=n=>l.showDate=!0)},null,8,["modelValue","label","placeholder","rules"]),l.requiredDate?(h(),y("div",$e,s(e.$t("required")),1)):w("",!0),i(g,{show:l.showDate,"onUpdate:show":o[5]||(o[5]=n=>l.showDate=n),position:"bottom"},{default:m(()=>[i(f,{"value-key":"name",columns:l.columns,onConfirm:l.onConfirm,onCancel:o[4]||(o[4]=n=>l.showDate=!1)},null,8,["columns","onConfirm"])]),_:1},8,["show"]),i(v,{"title-style":"text-align: left",value:l.form.settlement_type_name,"is-link":""},{title:m(()=>[a("span",Ae,s(e.$t("paymentMethod")),1)]),_:1},8,["value"])]),a("div",Oe,[i(p,{modelValue:l.form.remark,"onUpdate:modelValue":o[6]||(o[6]=n=>l.form.remark=n),rows:"2",autosize:"",label:e.$t("remark"),type:"textarea",maxlength:"30","show-word-limit":""},null,8,["modelValue","label"]),i(t,{class:"btn",plain:"",hairline:"",round:"",type:"primary",size:"small",onClick:l.toRemark},{default:m(()=>[q(s(e.$t("contactBeforeYouCome")),1)]),_:1},8,["onClick"])]),i(x,{modelValue:l.form.checked,"onUpdate:modelValue":o[8]||(o[8]=n=>l.form.checked=n),"checked-color":"#58be6a",style:{"margin-left":"10px","margin-bottom":"10px"},"label-disabled":"",onClick:o[9]||(o[9]=n=>l.requiredcheckbox=!1)},{default:m(()=>[q(s(e.$t("haveReadAgree"))+" ",1),a("span",{style:{color:"#2dc18c"},onClick:o[7]||(o[7]=n=>e.$router.push("/termsDetails"))}," \u300A"+s(e.$t("expressServiceTerms"))+" \u300B ",1)]),_:1},8,["modelValue"]),l.requiredcheckbox?(h(),y("div",Fe,s(e.$t("required")),1)):w("",!0)]),i(D,{show:l.show},null,8,["show"]),l.show?(h(),y("div",Te,[a("div",Ne,[a("div",null,s(e.$t("detail")),1),a("div",null,[i(b,{name:"cross",onClick:o[10]||(o[10]=n=>l.show=!1)})])]),a("div",Pe,[a("div",null,[a("div",Re,s(e.$t("basicFreight")),1),a("div",Me,s(e.$t("fixedCosts")),1),a("div",null,s(e.$t("weightMileageFee")),1)]),a("div",null,[a("div",ze,s(l.currencyUnit)+" "+s(l.form.count_settlement_amount),1),a("div",Ee,s(l.currencyUnit)+" "+s(l.form.starting_price),1),a("div",null,s(l.currencyUnit)+" "+s(l.form.package_list[0].settlement_amount),1)])])])):w("",!0),a("div",He,[a("div",Le,[a("div",Ye,[a("div",null,s(e.$t("estimatedTotalCost")),1),a("div",Ge,s(l.currencyUnit)+s(l.form.count_settlement_amount),1),Je,a("div",{onClick:o[11]||(o[11]=n=>l.show=!0),style:{cursor:"pointer"}},[q(s(e.$t("detail"))+" ",1),i(b,{color:"#DFDFDF",name:l.show==!0?"arrow-down":"arrow-up"},null,8,["name"])])]),a("div",We,s(e.$t("theActualTotalFeeVerificationPickup")),1)]),a("div",null,[i(t,{round:"",type:"success",style:{"min-width":"80px"},onClick:l.placeOrder},{default:m(()=>[q(s(e.$t("placeOrder")),1)]),_:1},8,["onClick"])])])],64)}var ia=ue(me,[["render",Ke],["__scopeId","data-v-2a3f28b5"]]);export{ia as default};
